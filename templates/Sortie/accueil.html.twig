{% extends 'layout.sortie.html.twig'%}


{%  block main %}

    <!-- Parti uniquement visible sur smartphone -->
<div class="d-block d-md-none">
    <table class="tableauSortie">
        <h3>Mes Sorties :</h3>
        <thead>
        <tr>
            <th>Nom de la sortie</th>
            <th >Date de la sortie</th>
        </tr>
        </thead>
        <tbody>
        {% for sortie in sorties %}
        <tr>
            <td align="center"><a href="{{ path('sortie_afficher', {'id':sortie.sortieId }) }}">{{ sortie.nomSortie }} </a></td>
            <td align="center">{{ sortie.dateHeure|date("d/m/Y H") }}h   </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

</div>
    <!--Parti uniquement visible sur tablette et ordinateur -->

    <!-- ////////////////////////  Filtre  ///////////////////////////////////-->


<div id="divFiltre" >
    <br><h3>Filtrer les sorties</h3>
    <form method="post" action="{{ path('accueil') }}" id="formFiltre" name="filtre" class="filtre">

    <div id="form1">
            <div id="b1">
                <label> Nom de la sortie:
                    <input name="search" type="text">
                </label>
            </div>

            <div id="b2">
                <label id="labelEntre">Entre :
                    <input name="dateDebut" type="date">
                </label>
                <label>et :
                    <input name="dateFin"  type="date">
                </label>
            </div>

            <div id="b6">
               <label for="selecCampus">Campus
               <select id="selecCampus" name="selectCampus"  >
                   {% for camp in campus %}
                       <option value="{{ camp.nomCampus }}" >{{ camp.nomCampus }}</option>
                   {% endfor %}
               </select></label><br>
            </div>

            <div id="b4" class="filtre_3 col-md-3">
                <button name="rechercher">Rechercher</button>
            </div>
        </div>

        <div id="form2">
            <!-- /////////////    Les Checkbox  //////////////////////////// -->
            <label class="label" for="organisateur">Sorties dont je suis l'organisateur/trice<input type="checkbox" class="ib6" id="organisateur" name="organisateur" {{ organisateurCheck }} ></label><br>
            <label class="label" for="inscrit">Sorties auxquelles je suis inscrit/e<input type="checkbox" class="ib6" id="inscrit" name="inscrit" {{ inscritCheck }} ></label><br>
            <label class="label" for="pasInscrit">Sorties auxquelles je ne suis pas inscrit/e<input type="checkbox" class="ib6" id="pasInscrit" name="pasInscrit"{{ pasInscritCheck}} ></label><br>
            <label class="label" for="passees">Sorties passées</label><input type="checkbox" class="ib6" id="passees" name="passees" {{ passeesCheck }} >
        </div>
    </form><br><br>

    <!-- ///////////////// Le tableau des Sorties /////-->
</div>
        <table class="tableauSortie col-md-12 col-lg-12 d-none d-md-block">
            <thead>
            <tr>
                <th>Nom de la sortie</th>
                <th >Date de la sortie</th>
                <th >Clôture</th>
                <th>Inscrits/Places</th>
                <th>Etat</th>
                <th>Inscrit</th>
                <th>Organisateur</th>
                <th>Actions</th>
                {% if app.user.administrateur==1 %}
                    <th>Actions Administrateur</th>
                {% endif %}
            </tr>
            </thead>
            <tbody>


            {% for sortie in sorties2|filter(sortie=> dateDebut<sortie.dateHeure|date("Y-m-d") and dateFin>sortie.dateHeure|date("Y-m-d")) %}
                    {% include 'sortie/accueilBody.html.twig' %}
            {% endfor %}

            {% for sortie in sorties3|filter(sortie=>  sortie.organisateur.username != app.user.username and dateDebut<sortie.dateHeure|date("Y-m-d") and dateFin>sortie.dateHeure|date("Y-m-d")) %}
                    {% include 'sortie/accueilBody.html.twig' %}
            {% endfor %}

            {% for sortie in sorties4|filter(sortie=> sortie.organisateur.username != app.user.username and dateDebut<sortie.dateHeure|date("Y-m-d") and dateFin>sortie.dateHeure|date("Y-m-d")) %}
                    {% include 'sortie/accueilBody.html.twig' %}
            {% endfor %}


            </tbody>
        </table><br>

    <div class="col d-none d-md-block">
        <a id="creerSortie" href="{{ path('sortie_creation') }}">Créer une sortie</a>
    </div><br>
{% endblock %}
{% block title %}Accueil{% endblock %}